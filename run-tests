#! /usr/bin/env arc

(load "lib/tester.arc")

(mac extend (name arglist test . body)
  (w/uniq args
    `(let orig ,name
       (= ,name
          (fn ,args
            (aif (apply (fn ,arglist ,test) ,args)
                  (apply (fn ,arglist ,@body) ,args)
                  (apply orig ,args)))))))

(test-files "tests/apply"
            "tests/coerce"
            "tests/fn"
            "tests/re"
            "tests/(coerce foo 'fn)")
