#! /usr/bin/env arc

(load "lib/tester.arc")

(mac extend (name arglist test . body)
  (w/uniq args
    `(let orig ,name
       (= ,name
          (fn ,args
            (aif (apply (fn ,arglist ,test) ,args)
                  (apply (fn ,arglist ,@body) ,args)
                  (apply orig ,args)))))))

(test-files "tests/apply"
            "tests/arc"
            "tests/assign"
            "tests/coerce"
            "tests/fn"
            "tests/if"
            "tests/io.arc"
            ;"tests/io.arc (root)"
            "tests/quasiquote"
            "tests/quote"
            ;"tests/re"
            "tests/strings.arc"
            "tests/(coerce foo 'fn)"
)
