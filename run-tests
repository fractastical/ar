#! /usr/bin/env arc

(load "lib/tester.arc")

(mac extend (name arglist test . body)
  (w/uniq args
    `(let orig ,name
       (= ,name
          (fn ,args
            (aif (apply (fn ,arglist ,test) ,args)
                  (apply (fn ,arglist ,@body) ,args)
                  (apply orig ,args)))))))

(test-files "tests/apply"
            ;"tests/arc" ; would like to enable, but it's really slow...
            "tests/assign"
            "tests/coerce"
            "tests/fn"
            "tests/if"
            "tests/io.arc"
            ;"tests/io.arc (root)" ; needs to be run as root
            "tests/quasiquote"
            "tests/quote"
            ;"tests/re" ; our re support is too broken right now, enable later
            "tests/strings.arc"
            "tests/(coerce foo 'fn)"
)
